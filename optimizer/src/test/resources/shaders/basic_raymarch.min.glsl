const vec4 v=vec4(0.,0.,0.,1.);const int m=40;float s(vec3 v,vec3 b){vec3 m=abs(v)-b;return min(max(m.r,max(m.g,m.b)),0.)+length(max(m,0.));}float s(vec3 m){vec3 x=vec3(5.);return max(-(length(m-v.rgb)-v.a),s(m,vec3(.8)));}vec3 x(vec3 v){const vec3 m=vec3(.0001,0.,0.);float x=s(v+m.rgb)-s(v-m.rgb),r=s(v+m.grb)-s(v-m.gbr),b=s(v+m.gbr)-s(v-m.gbr);return normalize(vec3(x,r,b));}vec3 x(vec3 v,vec3 b){float r=0.,i=.1;vec3 e=v;for(int f=0;f<m;f++){e=v+r*b;i=s(e);if(abs(i)<=.0001)return x(e);r+=i;}return vec3(0.);}void e(out vec4 v,in vec2 m){vec2 i=-1.+2.*(m.rg/iResolution.rg);i.r*=iResolution.r/iResolution.g;vec3 b=vec3(cos(iGlobalTime)*3.,sin(iGlobalTime)*3.,-3.),e=vec3(0.,0.,0.),r=normalize(e-b),s=cross(vec3(0.,1.,0.),r),a=cross(r,s),c=b+r+.5*(i.r*s+i.g*a),g=normalize(c-b),o=abs(x(c,g));v=vec4(o,1.);}